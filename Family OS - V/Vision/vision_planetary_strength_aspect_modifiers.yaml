# ============================================================
# vision_planetary_strength_aspect_modifiers.yaml
# Family OS – Vision Engine Aspect-Based Strength Modifiers
# ============================================================

vision_planetary_strength_aspect_modifiers:
  metadata:
    engine: Vision
    file: vision_planetary_strength_aspect_modifiers.yaml
    version: "1.0.0"
    purpose: >
      Modifies planetary strength scores for the Vision engine
      based purely on planetary aspects.
      These modifiers adjust *directional clarity, distortion,
      inevitability, and karmic pull* — not execution or emotion.
    depends_on:
      - vision_planetary_strength_scoring.yaml
    principle: >
      Vision clarity is not decided by placement alone.
      Aspects decide whether vision is:
      - supported
      - delayed
      - distorted
      - accelerated
      - dissolved

  ############################################################
  # 1. ASPECT SEMANTICS (VISION CONTEXT)
  ############################################################

  aspect_semantics:
    standard_aspect:
      applies_to: [Sun, Moon, Mercury, Venus]
      degrees: [7]
      vision_effect: "Mirrors or challenges ideological direction"

    special_aspects:
      Saturn: [3, 7, 10]
      Mars: [4, 7, 8]
      Jupiter: [5, 7, 9]
      Rahu: [5, 7, 9]
      Ketu: [5, 7, 9]

  ############################################################
  # 2. CORE VISION-SHAPING ASPECT RULES
  ############################################################

  saturn_aspect_modifiers:

    - id: VIS-ASP-SAT-01
      if:
        target_planet in [Sun, Jupiter]
        aspected_by: Saturn
        aspect_type in [3, 7, 10]
      then:
        vision_modifier:
          multiplier: 1.15
          effect: "Inevitable long-term destiny strengthened"

    - id: VIS-ASP-SAT-02
      if:
        target_planet in [Moon, Venus]
        aspected_by: Saturn
        aspect_type in [3, 7, 10]
      then:
        vision_modifier:
          multiplier: 0.90
          effect: "Emotional or comfort-based vision suppressed"

  jupiter_aspect_modifiers:

    - id: VIS-ASP-JUP-01
      if:
        target_planet in [Saturn, Sun]
        aspected_by: Jupiter
        aspect_type in [5, 7, 9]
      then:
        vision_modifier:
          multiplier: 1.20
          effect: "Dharmic clarity and moral direction enhanced"

    - id: VIS-ASP-JUP-02
      if:
        target_planet in [Moon, Mercury]
        aspected_by: Jupiter
        aspect_type in [5, 7, 9]
      then:
        vision_modifier:
          multiplier: 1.10
          effect: "Vision emotionally and intellectually aligned"

  rahu_aspect_modifiers:

    - id: VIS-ASP-RAH-01
      if:
        target_planet in [Sun, Jupiter]
        aspected_by: Rahu
        aspect_type in [5, 7, 9]
      then:
        vision_modifier:
          multiplier: 0.85
          effect: "Vision distorted by ambition or illusion"

    - id: VIS-ASP-RAH-02
      if:
        target_planet == Saturn
        aspected_by: Rahu
        aspect_type in [5, 7, 9]
      then:
        vision_modifier:
          multiplier: 1.10
          effect: "Accelerated karmic destiny (unstable but powerful)"

  ketu_aspect_modifiers:

    - id: VIS-ASP-KET-01
      if:
        target_planet in [Sun, Saturn]
        aspected_by: Ketu
        aspect_type in [5, 7, 9]
      then:
        vision_modifier:
          multiplier: 0.80
          effect: "Detachment from leadership or destiny goals"

    - id: VIS-ASP-KET-02
      if:
        target_planet == Jupiter
        aspected_by: Ketu
        aspect_type in [5, 7, 9]
      then:
        vision_modifier:
          multiplier: 0.90
          effect: "Letting go of belief systems after fulfillment"

  sun_aspect_modifiers:

    - id: VIS-ASP-SUN-01
      if:
        aspected_by: Jupiter
        aspect_type == standard_7th
      then:
        vision_modifier:
          multiplier: 1.15
          effect: "Vision backed by ethical authority"

    - id: VIS-ASP-SUN-02
      if:
        aspected_by: Saturn
        aspect_type == standard_7th
      then:
        vision_modifier:
          multiplier: 1.05
          effect: "Vision becomes duty-bound and serious"

  moon_aspect_modifiers:

    - id: VIS-ASP-MOON-01
      if:
        aspected_by: Jupiter
        aspect_type == standard_7th
      then:
        vision_modifier:
          multiplier: 1.05
          effect: "Emotional alignment with long-term direction"

    - id: VIS-ASP-MOON-02
      if:
        aspected_by: Saturn
        aspect_type == standard_7th
      then:
        vision_modifier:
          multiplier: 0.90
          effect: "Emotional detachment from vision"

  mercury_aspect_modifiers:

    - id: VIS-ASP-MER-01
      if:
        aspected_by: Jupiter
        aspect_type == standard_7th
      then:
        vision_modifier:
          multiplier: 1.05
          effect: "Clear articulation of vision"

    - id: VIS-ASP-MER-02
      if:
        mercury_afflicted: true
      then:
        vision_modifier:
          multiplier: 0.85
          effect: "Confused or contradictory vision messaging"

  venus_aspect_modifiers:

    - id: VIS-ASP-VEN-01
      if:
        aspected_by: Saturn
        aspect_type == standard_7th
      then:
        vision_modifier:
          multiplier: 0.90
          effect: "Comfort sacrificed for long-term purpose"

    - id: VIS-ASP-VEN-02
      if:
        aspected_by: Jupiter
        aspect_type == standard_7th
      then:
        vision_modifier:
          multiplier: 1.05
          effect: "Values align with dharmic vision"

  ############################################################
  # 3. MULTI-ASPECT RESOLUTION RULES
  ############################################################

  resolution_logic:
    stacking_method: multiplicative
    max_positive_multiplier: 1.30
    min_negative_multiplier: 0.70

    override_rules:
      - if: "Jupiter aspects Saturn AND Saturn aspects Sun"
        then: "Mark vision as karmically inevitable"

      - if: "Rahu aspects Jupiter AND Saturn weak"
        then: "Flag vision distortion risk"

      - if: "Ketu aspects Sun AND Moon afflicted"
        then: "Flag vision dissolution or withdrawal"

  ############################################################
  # 4. FINAL OUTPUT
  ############################################################

  resolved_vision_aspect_strength_adjustment:
    adjusted_planet_strength:
      description: "Planet strength after aspect-based modification"
    vision_distortion_index:
      description: "Degree of illusion vs clarity"
    destiny_inevitability_score:
      description: "How unavoidable the family vision is"
